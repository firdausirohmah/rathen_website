"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8618],{16037:function(e,a,l){var i=l(85893),t=l(72100),n=l(32080),s=l(67294),r=l(57851);a.Z=(0,s.memo)((0,s.forwardRef)(function(e,a){let{label:l,leftElement:s,rightElement:o,placeholder:d="",isRequired:c=!1,isInvalid:u=!1,error:m,defaultValue:g,id:v="",className:p,maxLength:h=524288,...f}=e;return(0,i.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[l&&(0,i.jsxs)("label",{htmlFor:v,className:"font-semibold text-sm",children:[l," ",!c&&(0,i.jsx)(n.Z,{className:"font-normal text-gray",children:"(Opsional)"})]}),(0,i.jsxs)("div",{className:"relative",children:[s&&(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none",children:s}),(0,i.jsx)("textarea",{id:v,className:(0,r.m)(s&&"pl-9",o&&"pr-9",(0,t.S)({isInvalid:u}),p),required:c,placeholder:"".concat(d).concat(c?" *":""),ref:a,defaultValue:g,maxLength:h,...f}),o&&(0,i.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:o})]}),m&&(0,i.jsx)(n.Z,{className:"text-danger",children:m})]})}))},44131:function(e,a,l){l.d(a,{Z:function(){return v}});var i=l(85893),t=l(77987),n=l(92764),s=l(37054),r=l(67294),o=l(62774),d=l(2766),c=l(32080);let u=["places","drawing","geometry","localContext","visualization"],m=e=>({url:e,scaledSize:new google.maps.Size(25,30),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(11,0)});function g(e){let{children:a}=e;return(0,i.jsx)(o.Z,{className:"!rounded-none bg-white w-[128px] p-2",children:a})}function v(e){let{isStandAlone:a,apiKey:l,center:o,width:v,height:p,zoomLevel:h=10,markers:f,showCurrentLocation:x,existedAddress:b,getlatLng:j=()=>null}=e,[y,k]=(0,r.useState)(b||""),[Z,N]=(0,r.useState)(!1),I=async e=>{try{let a=await window.google.maps.Geocoder.prototype.geocode({location:e});return N(!1),a.results}catch(e){return e}},[w,A]=(0,r.useState)(),C=e=>{A(e),N(!0)},S=async e=>{var a,l,i,t,n,s,r,o,d;let c=null===(a=null==w?void 0:w.getPlaces())||void 0===a?void 0:a.find(()=>!0),u=await window.google.maps.Geocoder.prototype.geocode({location:e||{lat:null==c?void 0:null===(l=c.geometry)||void 0===l?void 0:null===(i=l.location)||void 0===i?void 0:i.lat(),lng:null==c?void 0:null===(t=c.geometry)||void 0===t?void 0:null===(n=t.location)||void 0===n?void 0:n.lng()}});k(Z?null==c?void 0:c.formatted_address:u.results[0].formatted_address),j({lat:(null==e?void 0:e.lat)||(null==c?void 0:null===(s=c.geometry)||void 0===s?void 0:null===(r=s.location)||void 0===r?void 0:r.lat()),lng:(null==e?void 0:e.lng)||(null==c?void 0:null===(o=c.geometry)||void 0===o?void 0:null===(d=o.location)||void 0===d?void 0:d.lng())},I)},M=t.he,[L,D]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!(null==f?void 0:f.length))return;let e=f.find(e=>e.center.lat===o.lat&&e.center.lng===o.lng);D(e||null)},[f,o]);let{isLoaded:q,loadError:z}=(0,s.Db)({googleMapsApiKey:l,libraries:u}),T=(0,r.useMemo)(()=>({width:v,height:p}),[v,p]),R=(0,r.useMemo)(()=>{let e={disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0,scaleControl:!0,zoom:10};return a?e:{...e,zoom:x?h-2:h}},[a,x,h]);return!z&&o.lat&&o.lng?q?(0,i.jsxs)("div",{children:[a&&(0,i.jsx)(s.Zk,{onLoad:C,onPlacesChanged:S,children:(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",value:y,onChange:e=>k(e.target.value),placeholder:"Masukan alamat",className:"mb-4 text-sm text-dark block w-full !rounded-lg !border-stroke !shadow-sm focus:border-transparent focus:ring-1 focus:!ring-primary !caret-dark placeholder-gray disabled:bg-stroke disabled:text-gray h-10"})})}),(0,i.jsxs)(s.b6,{onClick:e=>{var a,l;return S({lat:null===(a=e.latLng)||void 0===a?void 0:a.lat(),lng:null===(l=e.latLng)||void 0===l?void 0:l.lng()})},mapContainerStyle:T,options:R,center:o,children:[L&&(0,i.jsx)(s.nx,{position:L.center||o,onCloseClick:()=>D(null),children:(0,i.jsx)(g,{children:(0,i.jsx)(c.Z,{className:"font-semibold",children:(0,n.kC)(L.name)})})}),!f&&(0,i.jsx)(s.jC,{position:o}),Array.isArray(f)&&f.map(e=>(0,i.jsx)(s.jC,{position:e.center,icon:m(e.icon),onClick:()=>D(e)},e.id)),x&&M.lat&&M.lng&&(0,i.jsx)(s.jC,{position:M})]})]}):(0,i.jsx)(d.Z,{width:v,height:p}):(0,i.jsx)("div",{children:"Map cannot be loaded right now, sorry."})}},48618:function(e,a,l){l.d(a,{Z:function(){return B}});var i=l(85893),t=l(62774),n=l(80054),s=l(2895),r=l(2766),o=l(66124),d=l(7089),c=l(67294),u=l(57851);let m={default:"border-gray bg-[#fafafa] text-dark",success:"border-warning bg-[#FFF9EA] text-[#996500]",warning:"border-success bg-[#CCFFCC] text-[#2D6C28]"};var g=(0,c.memo)(function(e){let{children:a,variant:l="default",className:t}=e;return(0,i.jsx)("span",{className:(0,u.m)("tracking-wide border rounded-sm text-2xs font-bold inline-block px-4 py-[3.5px]",m[l],t),children:a})}),v=l(32080),p=l(37360),h=l(99814),f=l(74403),x=l(61238),b=l(41664),j=l.n(b),y=l(37518),k=l(4346),Z=l(79119),N=l(86891),I=l(16037),w=l(44131),A=l(77987),C=l(92764),S=l(36492),M=l(48228),L=l(87536),D=l(34155);let q=(0,k.Z)({baseURL:"".concat("https://jeanne.eraspace.com/customers","/v1"),config:{isAuth:!0,includeDeviceInfo:!0,includeSource:!0}}),z=async e=>{let{page:a,size:l}=e,i=(0,C.yI)({page:a,size:l});return(0,y.Z)(()=>q.get("master/regions".concat(i)))},T=async e=>{let{page:a,size:l,regionId:i}=e,t=(0,C.yI)({page:a,size:l,regionId:i});return(0,y.Z)(()=>q.get("master/cities".concat(t)))},R=async e=>{let{page:a,size:l,cityId:i}=e,t=(0,C.yI)({page:a,size:l,cityId:i});return(0,y.Z)(()=>q.get("master/districts".concat(t)))},F=async e=>{let{page:a,size:l,districtId:i}=e,t=(0,C.yI)({page:a,size:l,districtId:i});return(0,y.Z)(()=>q.get("master/sub-districts".concat(t)))},P=(e,a)=>(0,S.a)(["masters","regions",e],()=>z(e),{...a,staleTime:1/0}),U=(e,a)=>{var l;return(0,S.a)(["masters","cities",e],()=>T(e),{...a,enabled:!!e.regionId&&(null===(l=null==a?void 0:a.enabled)||void 0===l||l),staleTime:1/0})},_=(e,a)=>{var l;return(0,S.a)(["masters","districts",e],()=>R(e),{...a,enabled:!!e.cityId&&(null===(l=null==a?void 0:a.enabled)||void 0===l||l),staleTime:1/0})},E=(e,a)=>{var l;return(0,S.a)(["masters","sub-districts",e],()=>F(e),{...a,enabled:!!e.districtId&&(null===(l=null==a?void 0:a.enabled)||void 0===l||l),staleTime:1/0})},K=async e=>(0,y.Z)(()=>q.post("profile/addresses",e));function Y(e){var a,l,s,r,d,u,m,g;let{addressData:v,onSuccess:p}=e,[h,f]=(0,c.useState)(!1),[x,b]=(0,c.useState)(!1),[j,y]=(0,c.useState)({address:"Monas jakarta",location:{lat:A.he.lat,lng:A.he.lng}}),k=async(e,a,l)=>{let i=l&&await l({lat:e||0,lng:a||0});y({address:i[0].formatted_address,location:{lat:e||0,lng:a||0}})},{resetField:C,watch:S,register:q,handleSubmit:z,formState:{errors:T}}=(0,L.cI)({mode:"onTouched"}),R=S("regionId");(0,c.useEffect)(()=>{C("cityId")},[R]);let F=S("cityId");(0,c.useEffect)(()=>{C("districtId")},[F]);let Y=S("districtId");(0,c.useEffect)(()=>{C("subDistrictId")},[Y]);let O=S("subDistrictId"),B=function(){let e=async e=>{let a=await K(e);if(200!==a.status)throw Error("An error has occured");return a};return(0,M.D)(a=>e(a))}(),G=P({page:1,size:50}),X=(0,c.useMemo)(()=>{var e,a;return(null===(e=G.data)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.items)||[]},[G.data]),H=U({page:1,size:50,regionId:R}),V=(0,c.useMemo)(()=>{var e,a;return(null===(e=H.data)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.items)||[]},[H.data]),J=_({page:1,size:50,cityId:F}),Q=(0,c.useMemo)(()=>{var e,a;return(null===(e=J.data)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.items)||[]},[J.data]),W=E({page:1,size:50,districtId:Y}),$=(0,c.useMemo)(()=>{var e,a;return(null===(e=W.data)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.items)||[]},[W.data]),ee=(0,c.useMemo)(()=>{var e;return O&&0!==$.length&&(null===(e=$.find(e=>e.id===Number(O)))||void 0===e?void 0:e.postcode)||""},[O,$]),ea=e=>{var a;let{firstname:l,lastname:i,telephone:t,street:n,cityId:s,districtId:r,subDistrictId:o}=e,d=(null===(a=X.find(e=>e.id===Number(R)))||void 0===a?void 0:a.code)||"",c={firstname:l,lastname:i,street:n,telephone:t,countryCode:"ID",regionCode:d,cityId:Number(s),districtId:Number(r),subDistrictId:Number(o),postcode:ee,isBilling:!0,isDefaultBilling:!0,isShipping:!0,isDefaultShipping:h};x&&(c={...c,streetMap:j.address,latitude:j.location.lat||0,longitude:j.location.lng||0}),B.mutate(c,{onSuccess:e=>{let{data:a}=e;p(a)}})};return(0,i.jsx)("form",{onSubmit:z(ea),children:(0,i.jsxs)(o.Z,{dir:"column",gap:3,children:[(0,i.jsx)(N.Z,{id:"firstname",label:"Nama depan",placeholder:"Masukkan nama depan Anda",...q("firstname",{required:{value:!0,message:A.UY}}),isRequired:!0,isInvalid:!!(null==T?void 0:T.firstname),error:null==T?void 0:null===(a=T.firstname)||void 0===a?void 0:a.message}),(0,i.jsx)(N.Z,{id:"lastname",label:"Nama belakang",placeholder:"Masukkan nama belakang Anda",...q("lastname",{required:{value:!0,message:A.UY}}),isRequired:!0,isInvalid:!!(null==T?void 0:T.lastname),error:null==T?void 0:null===(l=T.lastname)||void 0===l?void 0:l.message}),(0,i.jsx)(N.Z,{id:"telephone",label:"Nomor telepon",placeholder:"Masukkan Nomor telepon Anda",...q("telephone",{required:{value:!0,message:A.UY},pattern:{value:A.HF,message:"Masukkan nomor dengan format 62XX atau 0XX minimal 10 digit"}}),isRequired:!0,isInvalid:!!(null==T?void 0:T.telephone),error:null==T?void 0:null===(s=T.telephone)||void 0===s?void 0:s.message}),(0,i.jsx)(I.Z,{className:"h-16",id:"address",label:"Alamat",placeholder:"Masukkan Alamat Anda",...q("street",{required:{value:!0,message:A.UY}}),isRequired:!0,isInvalid:!!(null==T?void 0:T.street),error:null==T?void 0:null===(r=T.street)||void 0===r?void 0:r.message}),(0,i.jsx)(Z.Z,{label:"Provinsi",...q("regionId",{required:{value:!0,message:A.UY}}),placeholder:"Silahkan pilih provinsi",options:X.map(e=>({label:e.name,value:e.id})),isRequired:!0,disabled:G.isLoading,isInvalid:!!(null==T?void 0:T.regionId),error:null==T?void 0:null===(d=T.regionId)||void 0===d?void 0:d.message}),(0,i.jsx)(Z.Z,{label:"Kota",...q("cityId",{required:{value:!0,message:A.UY}}),options:[{label:"Silahkan pilih kota",value:""},...V.map(e=>({label:e.name,value:e.id}))],isRequired:!0,isInvalid:!!(null==T?void 0:T.cityId),disabled:!R||H.isLoading,error:null==T?void 0:null===(u=T.cityId)||void 0===u?void 0:u.message}),(0,i.jsx)(Z.Z,{label:"Kecamatan",...q("districtId",{required:{value:!0,message:A.UY}}),options:[{label:"Silahkan pilih kecamatan",value:""},...Q.map(e=>({label:e.name,value:e.id}))],isRequired:!0,disabled:!F||J.isLoading,isInvalid:!!(null==T?void 0:T.districtId),error:null==T?void 0:null===(m=T.districtId)||void 0===m?void 0:m.message}),(0,i.jsx)(Z.Z,{label:"Kelurahan",...q("subDistrictId",{required:{value:!0,message:A.UY}}),options:[{label:"Silahkan pilih kelurahan",value:""},...$.map(e=>({label:e.name,value:e.id}))],isRequired:!0,disabled:!Y||W.isLoading,isInvalid:!!(null==T?void 0:T.subDistrictId),error:null==T?void 0:null===(g=T.subDistrictId)||void 0===g?void 0:g.message}),(0,i.jsx)(N.Z,{defaultValue:ee,disabled:!0,id:"postcode",isRequired:!0,label:"Kode Pos",placeholder:"Kode Pos"}),(0,i.jsxs)(t.Z,{className:"flex items-center",children:[(0,i.jsx)("input",{name:"isDefaultShipping",checked:h,onChange:e=>f(e.target.checked),type:"checkbox",id:"isDefaultShipping",className:"w-4 h-4 text-blue-900 bg-gray-100 rounded border-gray-300 focus:ring-blue-900 dark:focus:ring-blue-900 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,i.jsx)("label",{htmlFor:"isDefaultShipping",className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Gunakan sebagai alamat pengiriman utama"})]}),(0,i.jsxs)(t.Z,{className:"gmaps",children:[(0,i.jsxs)("label",{htmlFor:"default-toggle",className:"inline-flex relative items-center cursor-pointer",children:[(0,i.jsx)("input",{onChange:e=>b(e.target.checked),type:"checkbox",value:"",id:"default-toggle",className:"sr-only peer",checked:x}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-black"}),(0,i.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Atur Pinpoint"})]}),x&&(0,i.jsx)("div",{className:"mt-4 w-full",children:(0,i.jsx)(w.Z,{isStandAlone:!0,apiKey:D.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"",center:j.location,existedAddress:null==v?void 0:v.streetMap,height:375,width:"100%",zoomLevel:14,showCurrentLocation:!1,getlatLng:(e,a)=>k(e.lat,e.lng,a)})})]}),(0,i.jsx)(n.Z,{isLoading:B.isLoading,type:"submit",className:"mt-4 w-full bg-black text-white",children:"Simpan"})]})})}function O(){return(0,i.jsx)(i.Fragment,{children:Array.from([,,,,,].keys()).map((e,a)=>(0,i.jsx)(r.Z,{height:125,isRounded:!0},a))})}var B=(0,c.memo)(function(e){var a,l;let{selectedAddressId:r,onSelectAddress:m,showAddressLink:b=!0,onClose:y}=e,k=(0,x.Kw)(e=>e.isMobile),Z=(0,f.Z)(),[N,I]=(0,c.useState)(1),w=(0,h.si)({page:1,size:100}),A=(null===(a=w.data)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.items)||[],C=(0,c.useMemo)(()=>0===A.length?(0,i.jsx)(v.Z,{children:"Anda belum memiliki alamat tersimpan."}):A.map(e=>(0,i.jsxs)(o.Z,{dir:"column",gap:1,items:"start",className:(0,u.m)("border border-stroke p-3",e.id===r&&"ring-1.5 ring-primary"),children:[(0,i.jsxs)(o.Z,{gap:1,children:[(0,i.jsx)(v.Z,{className:"text-base font-bold",children:"".concat(e.firstname," ").concat(e.lastname)}),e.isDefaultShipping&&(0,i.jsx)(g,{children:"Utama"})]}),(0,i.jsxs)(v.Z,{className:"md:text-sm",children:["".concat(null==e?void 0:e.street,", ").concat(null==e?void 0:e.subDistrict,", ").concat(null==e?void 0:e.district,", ").concat(null==e?void 0:e.city," ").concat(null==e?void 0:e.postcode)," ",(0,i.jsx)("br",{}),null==e?void 0:e.telephone]}),!e.isDefaultShipping&&(0,i.jsx)("hr",{className:"my-2 w-full"}),(0,i.jsx)(o.Z,{gap:2,className:"w-full justify-end",children:e.id!==r&&(0,i.jsx)(s.Z,{size:"x-small",variant:"outline-primary",onClick:()=>m(e),children:"Pilih Alamat"})})]},e.id)),[A]),S=()=>2===N?(0,i.jsx)(Y,{onSuccess:e=>{m(e),w.refetch()}}):(0,i.jsx)(o.Z,{dir:"column",gap:4,children:w.isLoading?(0,i.jsx)(O,{}):C});return k?(0,i.jsx)(p.Z,{isOpen:!0,header:(0,i.jsxs)(o.Z,{justify:"between",items:"center",className:"w-full",children:[(0,i.jsx)(s.Z,{size:"small",variant:1===N?"primary":"link",onClick:()=>I(1),className:"rounded",children:"DAFTAR ALAMAT"}),(0,i.jsx)(s.Z,{size:"small",variant:2===N?"primary":"link",onClick:()=>I(2),className:"rounded",children:"TAMBAH ALAMAT"})]}),center:!1,onClose:Z.isOpen?Z.onToggle:y,children:S()}):(0,i.jsx)(d.Z,{header:(0,i.jsxs)(o.Z,{items:"center",className:"gap-1",children:[(0,i.jsx)(s.Z,{size:"small",variant:1===N?"primary":"link",onClick:()=>I(1),className:"rounded",children:"DAFTAR ALAMAT"}),(0,i.jsx)(s.Z,{size:"small",variant:2===N?"primary":"link",onClick:()=>I(2),className:"rounded",children:"TAMBAH ALAMAT"})]}),size:"xl",isOpen:!0,closeOnOverlayClick:!0,onClose:y,footerHasSeparator:!0,footer:b?(0,i.jsx)(t.Z,{className:"flex justify-end pt-2",children:(0,i.jsx)(j(),{href:"akun/alamat",children:(0,i.jsx)(n.Z,{className:"bg-white border-[1px] border-gray-300 rounded-sm text-right text-black",children:"Lihat Buku Alamat"})})}):null,children:S()})})}}]);